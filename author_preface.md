# 自序

本书第 1 版出版于 2016 年，几年过去，Kubernetes 已从一个新生事物发展为一个影响全球 IT 技术的基础设施平台，也推动了云原生应用、微服务架构、Service Mesh 等热门技术的普及和落地。现在，Kubernetes 已经成为明星项目，其开源项目拥有超过两万名贡献者，成为开源历史上发展速度超快的项目之一。

## 在这几年里：

Kubernetes 背后的重要开源公司 RedHat 被 IBM 大手笔收购，使 RedHat 基于 Kubernetes 架构的先进 PaaS 平台 --- OpenShift 成为 IBM 在云计算基础设施中的重要筹码；

Kubernetes 的两位核心创始人 Joe Beda 和 Craig McLuckie 所创立的提供 Kubernetes 咨询和技术支持的初创公司 Heptio 也被虚拟化领域的巨头 VMware 收购；

Oracle 收购了丹麦的一家初创公司 Wercker，然后开发了 Click2Kube，这是面向 Oracle 裸机云（Oracle Bare Metal Cloud）的一键式 Kubernetes 集群安装工具；

世界 500 强中的一些大型企业也决定以 Kubernetes 为基础重构内部 IT 平台架构，大数据系统的一些用户也在努力将其生产系统从庞大的大数据专有技术栈中剥离出来靠拢 Kubernetes。

## Kubernetes

Kubernetes 是将 『一切以服务（service）为中心，一切围绕服务运转』作为指导思想的创新型产品，这是它的一个亮点。它的功能和架构设计自始自终地遵循了这一指导思想，构建在 Kubernetes 上的系统不仅可以独立运行在物理机、虚拟机集群或者企业私有云上，也可以被托管在公有云上。

Kubernetes 的另一个亮点是自动化。在 Kubernetes 的解决方案中，一个服务可以自我扩展、自我诊断、并且容易升级，在收到服务扩容的请求后，Kubernetes 会触发调度流程，最终在待定的目标节点上启动相应数量的服务实例副本，这些服务实例副本在启动成功后会自动加入负载均衡器中并生效，整个过程无须额外的人工操作。另外，Kubernetes 会定时巡查每个服务的所有实例的可用性，确保服务实例的数量始终保持在预期的数量，当它发现某个实例不可用时，会自动重启该实例或者在其他节点上重新调度，运行一个新实例，这样，一个复杂的过程无须人工干预即可全部自动完成。试想一下，如果 一个包括几十个节点且运行着几万个容器的复杂系统，其负载均衡、故障检测和故障修复等都需要人工介入处理，其工作量将多大。

通常，我们会把 Kubernetes 看作 Docker 的上层架构，就好像 Java 与 J2EE 的关系一样：J2EE 是以 Java 为基础的企业级软件架构，Kubernetes 则以 Docker 为基础打造了一个云计算时代的全新分布式系统架构。但 Kubernetes 与 Docker 之间还存在更为复杂的关系，从表面上，似乎 Kubernetes 离不开 Docker，但实际上在 Kubernetes 的架构里，Docker 中是其目前支持的两种底层容器技术之一，另一种容器技术则是 Rocket，Rocket 为 CoreOS 推出的竞争产品。

Kubernetes 之所以同时支持 Docker 和 Rocket 这两种互相竞争的容器技术，是有深刻的历史原因的。快速发展的 Docker 打败了谷歌名噪一时的开源容器技术 Imctfy，并迅速风靡世界。但是，作为一个已经对全球 IT 公司产生重要影响的技术，Docker 容器标准的制定不可能被任何一个公司主导。于是，CoreOS 推出了与 Docker 抗衡的开源容器项目 Rocket，去呗一些知名 IT 公司一起主导容器技术的标准化，并与谷歌共同发起基于 CoreOS + Rocket + Kubernetes 的新项目 Tectonic，使容器技术分裂态势加剧。最后，Linux 基金会于 2015 年 6 月宣布成立开放容器技术项目（Open Container Project），谷歌、CoreOS 及 Docker 都加入该项目。OCP 项目成立后，Docker 公司放弃了自己的独家控制权，Docker 容器格式也被 OCP 采纳为新标准的基础，Docker 负责起草了 OCP 草案规范的初稿文档，并提交自己的容器执行引擎的源码作为 OCP 项目的启动资源。

2015 年 7 月，谷歌正式宣布加入 OpenStack 阵营，其目标是确保 Linux 容器及其关联的容器管理技术 Kubernetes 能够被 OpenStack 生态圈所接纳，这也意味着对数据中心控制平面的争夺已经结束，以容器为代表的应用形态与以虚拟化为代表的系统形态将会完美整合于 OpenStack 之上，并与软件定义网络和软件定义存储一起主导下一代数据中心。

谷歌凭借着几十年大规模容器使用的丰富经验，步步为营，先是祭出 Kubernetes 这个神器，然后掌控了容器技术的制定标准，最后入驻 OpenStack 阵营全力支持 Kubernetes 的发展。可以预测，Kubernetes 的影响可能超过十年，所以，我们每个 IT 人都有理由重视这门新技术。

谁能比别人领先一步掌握新技术，谁就能在竞争中赢得先机。慧与中国通信和媒体解决方案领域的资深专家团一起分工协作、并行研究，并废寝忘食地全力撰写，才促成了这部巨著的出版。经过这些年的高速发展，Kubernetes 先后发布了十几个大版本，每个版本都带来了大量的新特性，能够处理的应用场景也越来越丰富。本书遵循从入门到精通的学习路线，涵盖了入门、安装指南、实践指南、核心原理、开发指南、运维指南、新特性演进等内容，内容翔实、图文并茂，几乎囊括了 Kubernetes 当前主流版本的方方面面，无论是对于软件工程师、测试工程师、运维工程师、软件架构师、技术经理，还是对于资深 IT 人士，本书都极具参考价值。

吴治辉

HPE资深架构师

